{
    "name": "ai-code-context",
    "displayName": "AI Code Context",
    "publisher": "tan-yong-sheng",
    "description": "Code indexing and semantic search for AI coding assistants",
    "version": "0.1.10",
    "private": true,
    "engines": {
        "vscode": "^1.74.0"
    },
    "categories": [
        "Other"
    ],
    "keywords": [
        "code",
        "vibe coding",
        "AI coding",
        "agent",
        "MCP",
        "code search",
        "semantic search",
        "index",
        "search",
        "navigation",
        "symbols"
    ],
    "icon": "resources/icon.png",
    "activationEvents": [
        "onStartupFinished"
    ],
    "main": "./dist/extension.js",
    "contributes": {
        "commands": [
            {
                "command": "semanticCodeSearch.semanticSearch",
                "title": "Semantic Search",
                "category": "Semantic Code Search"
            },
            {
                "command": "semanticCodeSearch.indexCodebase",
                "title": "Index Codebase",
                "category": "Semantic Code Search"
            },
            {
                "command": "semanticCodeSearch.clearIndex",
                "title": "Clear Index",
                "category": "Semantic Code Search"
            }
        ],
        "menus": {
            "editor/context": [
                {
                    "command": "semanticCodeSearch.semanticSearch",
                    "when": "editorHasSelection",
                    "group": "navigation@100"
                }
            ]
        },
        "viewsContainers": {
            "activitybar": [
                {
                    "id": "semanticCodeSearchSidebar",
                    "title": "Semantic Code Search",
                    "icon": "./resources/activity_bar.svg"
                }
            ]
        },
        "views": {
            "semanticCodeSearchSidebar": [
                {
                    "id": "semanticSearchView",
                    "name": "Semantic Search",
                    "type": "webview"
                }
            ]
        },
        "configuration": {
            "title": "Semantic Code Search",
            "properties": {
                "semanticCodeSearch.embeddingProvider.provider": {
                    "type": "string",
                    "enum": [
                        "OpenAI",
                        "VoyageAI",
                        "Ollama",
                        "Gemini"
                    ],
                    "description": "Embedding service provider"
                },
                "semanticCodeSearch.embeddingProvider.model": {
                    "type": "string",
                    "description": "Embedding model to use"
                },
                "semanticCodeSearch.embeddingProvider.apiKey": {
                    "type": "string",
                    "description": "API key for the embedding provider"
                },
                "semanticCodeSearch.embeddingProvider.baseURL": {
                    "type": "string",
                    "description": "Custom API endpoint URL (optional)"
                },
                "semanticCodeSearch.embeddingProvider.host": {
                    "type": "string",
                    "description": "Ollama server host URL (optional)"
                },
                "semanticCodeSearch.embeddingProvider.keepAlive": {
                    "type": "string",
                    "description": "Keep model alive duration for Ollama (optional)"
                },
                "semanticCodeSearch.embeddingProvider.outputDimensionality": {
                    "type": "number",
                    "description": "Output dimension for Gemini embedding (supports Matryoshka representation: 3072, 1536, 768, 256)"
                },
                "semanticCodeSearch.vectorDb.dbPath": {
                    "type": "string",
                    "description": "Custom path for vector database storage (optional). Default: ~/.code-context/vectors/"
                },
                "semanticCodeSearch.autoSync.enabled": {
                    "type": "boolean",
                    "default": true,
                    "description": "Enable automatic synchronization of workspace index every 5 minutes"
                },
                "semanticCodeSearch.autoSync.intervalMinutes": {
                    "type": "number",
                    "default": 5,
                    "minimum": 1,
                    "maximum": 60,
                    "description": "Auto-sync interval in minutes (1-60). This runs periodic sync to keep the index updated."
                },
                "semanticCodeSearch.splitter.type": {
                    "type": "string",
                    "enum": [
                        "langchain",
                        "ast"
                    ],
                    "enumDescriptions": [
                        "Language-aware text splitter with support for multiple programming languages",
                        "AST-based code splitter that splits code by logical units (functions, classes, etc.)"
                    ],
                    "default": "langchain",
                    "description": "Code splitter type to use for breaking down code into chunks"
                },
                "semanticCodeSearch.splitter.chunkSize": {
                    "type": "number",
                    "default": 1000,
                    "minimum": 100,
                    "maximum": 5000,
                    "description": "Maximum size of each code chunk in characters"
                },
                "semanticCodeSearch.splitter.chunkOverlap": {
                    "type": "number",
                    "default": 200,
                    "minimum": 0,
                    "maximum": 1000,
                    "description": "Number of overlapping characters between consecutive chunks"
                },
                "semanticCodeSearch.embeddingProvider.embeddingDimension": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 8192,
                    "description": "REQUIRED: Embedding dimension for the model. Auto-filled for known models (1536 for OpenAI text-embedding-3-small, 1024 for VoyageAI, etc.). Must be manually entered for custom models."
                },
                "semanticCodeSearch.embeddingProvider.embeddingBatchSize": {
                    "type": "number",
                    "default": 100,
                    "minimum": 1,
                    "maximum": 1000,
                    "description": "Number of chunks to process in each embedding batch (default: 100). Lower values for rate-limited APIs."
                },
                "semanticCodeSearch.advanced.customExtensions": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "default": [],
                    "description": "Additional file extensions to include (e.g., ['.custom', '.ext']). Supports glob patterns."
                },
                "semanticCodeSearch.advanced.customIgnorePatterns": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "default": [],
                    "description": "Additional patterns to ignore (e.g., ['**/generated/**', '**/*.min.js']). Supports glob patterns."
                },
                "semanticCodeSearch.advanced.chunkLimit": {
                    "type": "number",
                    "default": 450000,
                    "minimum": 100000,
                    "maximum": 2000000,
                    "description": "Maximum number of chunks to index per codebase (default: 450000). Increase for larger codebases."
                }
            }
        }
    },
    "scripts": {
        "vscode:prepublish": "pnpm run webpack && TARGET_NODE_VERSION=22.21.1 node scripts/copy-native-deps.js",
        "compile": "pnpm clean && tsc --build --force && node copy-assets.js",
        "webpack": "pnpm clean && webpack --mode production && node copy-assets.js",
        "webpack:dev": "webpack --mode development && node copy-assets.js",
        "watch": "tsc -watch -p ./",
        "clean": "rimraf dist",
        "lint": "eslint src",
        "lint:fix": "eslint src --fix",
        "typecheck": "tsc --noEmit",
        "test": "vscode-test",
        "test:compile": "tsc -p ./tsconfig.test.json",
        "rebuild-native": "cd node_modules/better-sqlite3 && npx node-gyp rebuild --release",
        "rebuild-native:ci": "cd node_modules/better-sqlite3 && TARGET_NODE_VERSION=22.21.1 npx node-gyp rebuild --target=22.21.1 --dist-url=https://nodejs.org/dist --release",
        "package": "pnpm rebuild-native:ci && pnpm webpack && TARGET_NODE_VERSION=22.21.1 node scripts/copy-native-deps.js && vsce package --no-dependencies",
        "package:ci": "pnpm webpack && node scripts/copy-native-deps.js && vsce package --no-dependencies",
        "release": "vsce publish --no-dependencies"
    },
    "dependencies": {
        "@tan-yong-sheng/code-context-core": "workspace:*",
        "better-sqlite3": "^11.10.0",
        "bindings": "^1.5.0",
        "file-uri-to-path": "^1.0.0",
        "web-tree-sitter": "^0.25.6"
    },
    "devDependencies": {
        "@types/mocha": "^10.0.0",
        "@types/node": "20.x",
        "@types/vscode": "^1.74.0",
        "@typescript-eslint/eslint-plugin": "^8.31.1",
        "@typescript-eslint/parser": "^8.31.1",
        "@vscode/test-cli": "^0.0.10",
        "@vscode/test-electron": "^2.4.1",
        "@vscode/vsce": "^3.4.0",
        "copy-webpack-plugin": "^12.0.2",
        "eslint": "^9.25.1",
        "node-gyp": "^10.0.0",
        "mocha": "^10.8.0",
        "source-map-loader": "^5.0.0",
        "ts-loader": "^9.5.2",
        "typescript": "^5.8.3",
        "webpack": "^5.99.9",
        "webpack-cli": "^5.1.4"
    },
    "repository": {
        "type": "git",
        "url": "https://github.com/tan-yong-sheng/code-context.git",
        "directory": "packages/vscode-extension"
    },
    "license": "MIT"
}
